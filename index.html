<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Clothing App</title>
        <link rel="stylesheet" href="./css/styles.css">
        <link rel="stylesheet" href="./css/items-styles.css">

    <!-- Include Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
</head>

<body>

<!-- NavBar and consistent header -->
<header class="navbar">
    <a onclick="showPage('homePage')">
        <img src="./images/logo.png" href="index.html">
    </a>

    <nav>
        <ul>
            <li>
                <button class="nav-button" id="clothesPageButton" onclick="showPage('clothesPage')">
                    <div class="nav-icon"><i class="fas fa-shirt"></i></div>
                    <div class="nav-text">Clothes</div>
                </button>
            </li>
            <li>
                <button class="nav-button" id="outfitsPageButton" onclick="showPage('outfitsPage')">
                    <img class="nav-icon-pic" src="./images/hanger.png">
                    <div class="nav-text">Outfits</div>
                </button>
            </li>
            <li>
                <button class="nav-button" id="socialsPageButton" onclick="showPage('socialsPage')">
                    <div class="nav-icon"><i class="fas fa-globe"></i></div>
                    <div class="nav-text">Socials</div>
                </button>
            </li>
        </ul>
    </nav>

    <a>
        <img src="./images/user.png" href="index.html" onclick="openModal('profileModal')">
    </a>
</header>


<!-- Main page components and screens -->>
<main>
    <!---------------------------
    --- Home Page ---------------
    ---------------------------->

    <div id="homePage">
        <h1>Home Page</h1>

        <section>
            <h2>Section 1</h2>
            <p>This is the content of section 1.</p>
        </section>

        <section>
            <h2>Section 2</h2>
            <p>This is the content of section 2.</p>
        </section>
    </div>

    <!---------------------------
    --- Clothes Page ------------
    ---------------------------->
    <div id="clothesPage">
        <h1 id="items-title">Clothes Page</h1>

        <div class="sidebar">
            <div class="category" data-category="hats">Hats</div>
            <div class="category selected" data-category="tops">Tops</div>
            <div class="category" data-category="bottoms">Bottoms</div>
            <div class="category" data-category="shoes">Shoes</div>
        </div>

        <div class="items-section">
            <section id="section-items">

                <table id="search-bar-table">
                    <tr>
                        <th id="add">
                            <button id="add-button" title="Add new item" onclick="openModal('itemsCreateModal') " >
                                <img src="images/add1-svgrepo-com.svg">
                            </button>
                        </th>
                        <th>
                            <form>
                                <input type="text" id="search" name="search" placeholder="Search">
                            </form>
                        </th>
                    </tr>
                </table>

                <!--Table for hats-->
                <!--Page 1-->
                <div class="table hats" style="display: none;">
                        <table id="hats-table">
                            <tr>
                                <th></th>
                                <th class="items-cells"></th>
                                <th class="items-cells"></th>
                                <th class="items-cells"></th>
                                <th></th>
                            </tr>
                            <tr>
                                <td>
                                    <button id="hats-prev" title="Previous page">
                                        <img src="images/reshot-icon-arrow-chevron-left-975UQXVKZF.svg">
                                    </button>
                                </td>
                                <td class="items-cells"></td>
                                <td class="items-cells"></td>
                                <td class="items-cells"></td>
                                <td>
                                    <button id="hats-next" title="Next page">
                                        <img src="images/reshot-icon-arrow-chevron-right-WDGHUKQ634.svg">
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td class="items-cells"></td>
                                <td class="items-cells"></td>
                                <td class="items-cells"></td>
                                <td></td>
                            </tr>
                        </table>
                    </div>
                <!--Table for tops-->
                <div class="table tops" style="display: block;">
                        <table id="tops-table">
                            <tbody>
                                <tr>
                                    <th></th>
                                    <th class="items-cells"></th>
                                    <th class="items-cells"></th>
                                    <th class="items-cells"></th>
                                    <th></th>
                                </tr>
                                <tr>
                                    <td>
                                        <button id="tops-prev" title="Previous page">
                                            <img src="images/reshot-icon-arrow-chevron-left-975UQXVKZF.svg">
                                        </button>
                                    </td>
                                    <td class="items-cells"></td>
                                    <td class="items-cells"></td>
                                    <td class="items-cells"></td>
                                    <td>
                                        <button id="tops-next" title="Next page">
                                            <img src="images/reshot-icon-arrow-chevron-right-WDGHUKQ634.svg">
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td class="items-cells"></td>
                                    <td class="items-cells"></td>
                                    <td class="items-cells"></td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                <!--Table for bottoms-->
                <div class="table bottoms" style="display: none;">
                    <table id="bottoms-table">
                        <tr>
                            <th></th>
                            <th class="items-cells"></th>
                            <th class="items-cells"></th>
                            <th class="items-cells"></th>
                            <th></th>
                        </tr>
                        <tr>
                            <td>
                                <button id="bottoms-prev" title="Previous page">
                                    <img src="images/reshot-icon-arrow-chevron-left-975UQXVKZF.svg">
                                </button>
                            </td>
                            <td class="items-cells"></td>
                            <td class="items-cells"></td>
                            <td class="items-cells"></td>
                            <td>
                                <button id="bottoms-next" title="Next page">
                                    <img src="images/reshot-icon-arrow-chevron-right-WDGHUKQ634.svg">
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td></td>
                            <td class="items-cells"></td>
                            <td class="items-cells"></td>
                            <td class="items-cells"></td>
                            <td></td>
                        </tr>
                    </table>
                </div>
                <!--Table for shoes-->
                <div class="table shoes" style="display: none;">
                    <table id="shoes-table">
                        <tr>
                            <th></th>
                            <th class="items-cells"></th>
                            <th class="items-cells"></th>
                            <th class="items-cells"></th>
                            <th></th>
                        </tr>
                        <tr>
                            <td>
                                <button id="shoes-prev" title="Previous page">
                                    <img src="images/reshot-icon-arrow-chevron-left-975UQXVKZF.svg">
                                </button>
                            </td>
                            <td class="items-cells"></td>
                            <td class="items-cells"></td>
                            <td class="items-cells"></td>
                            <td>
                                <button id="shoes-next" title="Next page">
                                    <img src="images/reshot-icon-arrow-chevron-right-WDGHUKQ634.svg">
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td></td>
                            <td class="items-cells"></td>
                            <td class="items-cells"></td>
                            <td class="items-cells"></td>
                            <td></td>
                        </tr>
                    </table>
                </div>
            </section>
        </div>
    </div>

    <!---------------------------
    --- Outfits Page ------------
    ---------------------------->
    <div id="outfitsPage">

        <h1 id="headedO">Outfits Page</h1>

        <center>
            <section id="description-box">
                <h2 id="Description">Outfit 1</h2>
                <p>Item description</p>
            </section>

            <section id="content-box">
            </section>


            <!--The arrow buttons to enable scrolling-->

            <!--left button-->
            <button class="arrow left" onclick="removeFocus(this)"><i class="fa-solid fa-angle-left fa"></i></i></button>
            <!--right button-->
            <button class="arrow right" onclick="removeFocus(this)"><i class="fa-solid fa-angle-right fa"></i></button>


            <!--The bottom buttons-->

            <!--the add button-->
            <button class="OFB outfit-button1"onclick="openModal('clothingModal') "><i class="fa-solid fa-plus"></i></button>
            <!--the edit button-->
            <button Class="OFB outfit-button2"><i class="fa-solid fa-pen-to-square"></i></button>
            <!--the delete button-->
            <button Class="OFB outfit-button3" onclick="openCBox('deleteOutfitCBox')"><i class="fa-solid fa-trash-can"></i></button>
            <!--the share button-->
            <button Class="OFB outfit-button4"><i class="fa-solid fa-share"></i></button>

        </center>
    </div>

    <!---------------------------
    --- Socials Page ------------
    ---------------------------->
    <div id="socialsPage">
        <h1>Socials Page</h1>

        <div class="search-bar" align="right">
            <div class="searchButton">
                <input type="text" id="search-bar" placeholder="Search...">
                <button id="searchButton">Search</button>
            </div>
        </div>

        <div class="instagram-feed">
            <div class="post">
                <button class="follow-btn" onclick="toggleFollow(this)">Follow</button>
                <div><img class="post-img" src="https://www.shutterstock.com/shutterstock/photos/1286110465/display_1500/stock-photo-blue-midi-pleated-skirt-beige-knitted-sweater-small-black-cross-body-bag-belt-loafers-flat-1286110465.jpg" alt="Outfit 1"></div>
                <div class="post-caption">Outfit 1</div>
                <div class="post-buttons">
                    <div class="like-btn" onclick="toggleLike(this)">
                        <span class="icon">&#x2764;</span> Like
                    </div>
                    <div class="comment-btn">
                        <span class="icon">&#x1F4AC;</span> Comment
                    </div>
                    <div class="save-btn">
                        <span class="icon">&#128190;</span> Save
                    </div>
                </div>
            </div>

            <div class="post">
                <button class="follow-btn" onclick="toggleFollow(this)">Follow</button>
                <img class="post-img" src="https://cdn.shopify.com/s/files/1/0981/8178/files/pattern-button-down-shirt-outfit1.jpg?8369042167668645907" alt="Outfit 2">
                <div class="post-caption">Outfit 2</div>
                <div class="post-buttons">
                    <div class="like-btn" onclick="toggleLike(this)">
                        <span class="icon">&#x2764;</span> Like
                    </div>
                    <div class="comment-btn">
                        <span class="icon">&#x1F4AC;</span> Comment
                    </div>
                    <div class="save-btn">
                        <span class="icon">&#128190;</span> Save
                    </div>
                </div>
            </div>
        </div>

        <button id="postButton" onclick="openModal('postModal')">Post</button>
    </div>

</main>

<!---------------------------
--- Modals ------------------
---------------------------->
<!-- This is the modal overlay that darkens the screen -->
<div class="modal-overlay" id="modalOverlay" onclick="closeModal()"></div>

<!-- Clothing Modal -->
<div class="items-create-modal" id="itemsCreateModal">
    <div class="modal-content">
        <span class="right-close" id="closeModalBtn" onclick="closeModal()">&times;</span>
        <h2 style="text-align: center">Add Item</h2>
        <div class="item-create-input">
            <img src="images/istockphoto-1313311136-612x612.jpg" width="50%" height="50%"
            style=" display: block;
                    margin-left: auto;
                    margin-right: auto;"/>
            <p style="text-align: center">Name:    <input id="item-create-name" type="text" value="" width="50%"></p>
            <p style="text-align: center">Brand:   <input id="item-create-brand" type="text" value="" width="50%"></p>
            <p style="text-align: center">Weather: <select id="item-create-weather" name="weather" width="50%">
                <option value="Sunny">Sunny</option>
                <option value="Rainy">Rainy</option>
                <option value="Windy">Windy</option>
                <option value="Snowy">Snowy</option>
            </select></p>
            <button class="confirm-create-item"onclick="createItem(selectedCategory)"
                    style="display: block;
                    margin-left: auto;
                    margin-right: auto;">
                Confirm
            </button>
        </div>
    </div>
</div>

<div class="items-edit-modal" id="itemsEditModal">
    <div class="modal-content">
        <span class="right-close" id="closeModalBtn" onclick="closeModal()">&times;</span>
        <h2 style="text-align: center">Edit Item</h2>
        <div class="item-create-input">
            <img src="images/istockphoto-1313311136-612x612.jpg" width="50%" height="50%"
                 style=" display: block;
                    margin-left: auto;
                    margin-right: auto;"/>
            <p style="text-align: center">Name:    <input id="item-edit-name" type="text" width="50%"></p>
            <p style="text-align: center">Brand:   <input id="item-edit-brand" type="text" width="50%"></p>
            <p style="text-align: center">Weather: <select id="item-edit-weather" name="weather" width="50%">
                <option value="Sunny">Sunny</option>
                <option value="Rainy">Rainy</option>
                <option value="Windy">Windy</option>
                <option value="Snowy">Snowy</option>
            </select></p>
            <button class="confirm-edit-item" onclick="openCBox('editItemCBox')"
                    style="display: block;
                    margin-left: auto;
                    margin-right: auto;">
                Confirm
            </button>
        </div>
    </div>
</div>

<div class="clothing-modal" id="clothingModal">
    <div class="modal-content">
        <span class="right-close" id="closeModalBtn" onclick="closeModal()">&times;</span>
        <center>
        <h2>Add Outfit</h2>
        <p>Please select items for the new outfit.</p>
        </center>
        <!--<button class="close-button" onclick="closeModal()"><i class="fa-solid fa-xmark"></i></button>-->
        <button class="clothing-modal-buttons Tops" onclick="">Tops</button>
        <button class="clothing-modal-buttons Bottoms" onclick="">Bottoms</button>
        <button class="clothing-modal-buttons Shoes" onclick="">Shoes</button>
        <button class="clothing-modal-buttons Others" onclick="">Others</button>
    </div>
</div>

<!-- Profile Modal -->
<div class="profile-modal" id="profileModal">
    <div class="modal-content">
        <span class="left-close" id="closeModalBtn" onclick="closeModal()">&times;</span>
        <img class="profile-pic" src="./images/user.png">
        <div class="profile-text">FirstName LastName</div>
        <div class="profile-text">Description of the user.</div>
        
        <div class="profile-footer">
            <div><button class="profile-button">Edit Profile</button></div>
            <div><button class="profile-button">Settings</button></div>
        </div>
    </div>
</div>

<!-- Post Modal -->
<div class="post-modal" id="postModal">
    <div class="modal-content">
        <span class="right-close" id="closeModalBtn" onclick="closeModal()">&times;</span>
        <img class="post-modal-img" src="https://m.media-amazon.com/images/I/61Ysy6IFE3L._AC_SX679_.jpg" alt="Outfit 3">
        <div><button id="postButtonInPopup" onclick="postOutfit()">Post</button></div>
    </div>
</div>

<!---------------------------
--- Confirmation Boxes ------
---------------------------->
<!-- This is the confirmation box overlay that darkens the screen -->
<div class="cbox-overlay" id="cBoxOverlay" onclick="closeCBox()"></div>

<div class="cbox-modal" id="deleteOutfitCBox">
    <div class="cbox-content" id="modalContent">
        <h2>Delete Confirmation</h2>
        <p>Are you sure you want to delete this outfit?</p>
        <button class="cbox-button confirm" onclick="deleteOutfit()">Yes</button>
        <button class="cbox-button cancel" onclick="closeCBox()">Cancel</button>
    </div>
</div>

<div class="cbox-modal" id="editItemCBox">
    <div class="cbox-content" id="modalContent">
        <h2>Edit Confirmation</h2>
        <p>Are you sure you want to edit this item?</p>
        <button class="cbox-button confirm" onclick="editItem(selectedItem)">Yes</button>
        <button class="cbox-button cancel" onclick="closeCBox()">Cancel</button>
    </div>
</div>

<div class="cbox-modal" id="deleteItemCBox">
    <div class="cbox-content" id="modalContent">
        <h2>Delete Confirmation</h2>
        <p>Are you sure you want to delete this item?</p>
        <button class="cbox-button confirm" onclick="deleteItem(selectedItem)">Yes</button>
        <button class="cbox-button cancel" onclick="closeCBox()">Cancel</button>
    </div>
</div>

<!-- Consistent footer -->
<footer>
    <p> COMP 3020 A01 - CPG24</p>
</footer>


<!---------------------------
--- Scripts -----------------
---------------------------->
<script>
        let categories = document.querySelectorAll('.category');
        let tables = document.querySelectorAll('.table');
        let selectedCategory = "tops";
        let selectedItem;

        // Default selected category is tops([1])
        categories[1].classList.add('selected');

        categories.forEach(function(category) {
            category.addEventListener('click', function() {
                categories.forEach(function(c) {
                    c.classList.remove('selected');
                });
                this.classList.add('selected');

                // Hide all tables
                tables.forEach(function(table) {
                    table.style.display = 'none';
                });

                // Show the table corresponding to the selected category
                selectedCategory = this.getAttribute('data-category');
                let selectedTable = document.querySelector('.' + selectedCategory);
                selectedTable.style.display = 'block';
                console.log('Category clicked: ' + selectedCategory);
                togglePaginationBtnsDisabled();
            });
        });

    const Weather = {
        SUNNY: Symbol('SUNNY'),
        WINDY: Symbol('WINDY'),
        RAINY: Symbol('RAINY'),
        SNOWY: Symbol('SNOWY')
    }

    const Category = {
        HEADS: Symbol('HEADS'),
        TOPS: Symbol('TOPS'),
        BOTTOMS: Symbol('BOTTOMS'),
        SHOES: Symbol('SHOES')
    }

    class Item {
        constructor(name, brand, weather, category) {
            this.name = name;
            this.brand = brand;
            this.weather = weather;
            this.category = category;
        }
    }

    head1 = new Item("Winter Beanie", "Adidas", Weather.SNOWY, Category.HEADS);
    head2 = new Item("Winter Beanie", "North Face", Weather.SNOWY, Category.HEADS);
    head3 = new Item("Summer Cap", "Nike", Weather.SUNNY, Category.HEADS);
    head4 = new Item("Hiking Cap", "North Face", Weather.WINDY, Category.HEADS);
    head5 = new Item("Trucker Cap", "Asos", Weather.SUNNY, Category.HEADS);

    top1 = new Item("Winter Jacket", "North Face", Weather.SNOWY, Category.TOPS);
    top2 = new Item("Long Sleeve", "Stüssy", Weather.SUNNY, Category.TOPS);
    top3 = new Item("Summer T-Shirt", "Nike", Weather.SUNNY, Category.TOPS);
    top4 = new Item("Hiking Jacket", "Adidas", Weather.WINDY, Category.TOPS);
    top5 = new Item("Summer Shirt", "Asos", Weather.SUNNY, Category.TOPS);
    top6 = new Item("Winter Jacket", "North Face", Weather.SNOWY, Category.TOPS);
    top7 = new Item("Long Sleeve", "Stüssy", Weather.SUNNY, Category.TOPS);
    top8 = new Item("Summer T-Shirt", "Nike", Weather.SUNNY, Category.TOPS);
    top9 = new Item("Hiking Jacket", "Adidas", Weather.WINDY, Category.TOPS);
    top10 = new Item("Summer Shirt", "Asos", Weather.SUNNY, Category.TOPS);

    bottom1 = new Item("Ski Pants", "North Face", Weather.SNOWY, Category.BOTTOMS);
    bottom2 = new Item("Loose Jeans", "Levi's", Weather.SUNNY, Category.BOTTOMS);
    bottom3 = new Item("Cargo Pants", "H&M", Weather.SUNNY, Category.BOTTOMS);
    bottom4 = new Item("Hiking Pants", "North Face", Weather.WINDY, Category.BOTTOMS);
    bottom5 = new Item("Track Pants", "Adidas", Weather.SUNNY, Category.BOTTOMS);

    shoes1 = new Item("Air Force 1", "Nike", Weather.SUNNY, Category.SHOES);
    shoes2 = new Item("Dunk Lows", "Nike", Weather.SUNNY, Category.SHOES);
    shoes3 = new Item("Jordan 1 Low", "Jordan", Weather.SUNNY, Category.SHOES);
    shoes4 = new Item("Jordan 8 Winterized", "Jordan", Weather.SNOWY, Category.SHOES);
    shoes5 = new Item("Chucks High CDG", "Converse", Weather.SUNNY, Category.SHOES);

    let hatsList = [];
    var hatsTable = document.querySelector('#hats-table tbody');
    let topsList = [];
    var topsTable = document.querySelector('#tops-table tbody');
    let bottomsList = [];
    var bottomsTable = document.querySelector('#bottoms-table tbody');
    let shoesList = [];
    var shoesTable = document.querySelector('#shoes-table tbody');

    hatsList.push(head1, head2, head3, head4, head5);
    pagedHats = chunkArray(hatsList, 9);
    addDataToTable(hatsTable, pagedHats, 0);

    topsList.push(top1, top2, top3, top4, top5,
                    top6, top7, top8, top9, top10);
    pagedTops = chunkArray(topsList, 9);
    addDataToTable(topsTable, pagedTops, 0);

    bottomsList.push(bottom1, bottom2, bottom3, bottom4, bottom5);
    pagedBottoms = chunkArray(bottomsList, 9);
    addDataToTable(bottomsTable, pagedBottoms, 0);

    shoesList.push(shoes1, shoes2, shoes3, shoes4, shoes5);
    pagedShoes = chunkArray(shoesList, 9);
    addDataToTable(shoesTable, pagedShoes, 0);

    let pageNumber = calculatePageNum(selectedCategory);
    let currentPage = 0;
    currentModal = "";          // Keeps track of current Modal that is open
    currentCBox = "";          // Keeps track of current Confirmation Box that is open
        let pagedData;
        let selectedTable;
        setPaginationVariables();
        togglePaginationBtnsDisabled();


    function chunkArray(array, chunkSize) {
        var result = [];
        for (let i = 0; i < array.length; i += chunkSize) {
            result.push(array.slice(i, i + chunkSize));
        }
        console.log(result);
        return result;
    }

    document.getElementById(selectedCategory + '-next').onclick = function() {
        if (currentPage < pagedData.length - 1) {
            currentPage++;
            setPaginationVariables();
            refreshTableData(selectedTable, pagedData);
            addDataToTable(selectedTable, pagedData, currentPage);
            togglePaginationBtnsDisabled();
        }
    };

    document.getElementById(selectedCategory + '-prev').onclick = function() {
        if (currentPage > 0) {
            currentPage--;
            setPaginationVariables();
            refreshTableData(selectedTable, pagedData);
            addDataToTable(selectedTable, pagedData, currentPage);
            togglePaginationBtnsDisabled();
        }
    };

    function togglePaginationBtnsDisabled() {
        if(currentPage == 0) {
            document.getElementById(selectedCategory + '-prev').disabled = true;
        } else {
            document.getElementById(selectedCategory + '-prev').disabled = false;
        }
        if(currentPage == pageNumber - 1) {
            document.getElementById(selectedCategory + '-next').disabled = true;
        } else {
            document.getElementById(selectedCategory + '-next').disabled = false;
        }
    }

    function setPaginationVariables() {
        switch (selectedCategory) {
            case 'hats':
                pagedData = pagedHats;
                selectedTable = hatsTable;
                break;
            case 'tops':
                pagedData = pagedTops;
                selectedTable = topsTable;
                break;
            case 'bottoms':
                pagedData = pagedBottoms;
                selectedTable = bottomsTable;
                break;
            case 'shoes':
                pagedData = pagedShoes;
                selectedTable = shoesTable;
                break;
        }
    }

    function calculatePageNum(category) {

        let categoryList;

        switch(category) {
            case "hats": categoryList = hatsList; break;
            case "tops": categoryList = topsList; break;
            case "bottoms": categoryList = bottomsList; break;
            case "shoes": categoryList = shoesList; break;
        }
        console.log(category);

        return Math.floor((categoryList.length / 10) + 1);
    }

    function selectItem(cell) {
        console.log(cell);
        var buttonDiv = cell.querySelector('.edit-delete-item-btns');

        // If buttonDiv doesn't exist, log an error message and exit the function
        if (!buttonDiv) {
            console.error('No div with class "edit-delete-item-btns" found within the cell');
            return;
        }

        if(buttonDiv.style.display === 'none' || buttonDiv.style.display === '' ) {
            buttonDiv.style.display = 'block';
        } else {
            buttonDiv.style.display = 'none';
        }
    }

    // Function to toggle the visibility of pages
    function showPage(divId) {
        // hide all pages
        document.getElementById('homePage').style.display = 'none';
        document.getElementById('clothesPage').style.display = 'none';
        document.getElementById('outfitsPage').style.display = 'none';
        document.getElementById('socialsPage').style.display = 'none';

        // Show the selected div
        document.getElementById(divId).style.display = 'block';

        updateNavButtons(divId + 'Button');
    }

    // Function to toggle the shading of navigation buttons
    function updateNavButtons(buttonId) {
        document.getElementById('clothesPageButton').style.backgroundColor = '#ffffff';
        document.getElementById('outfitsPageButton').style.backgroundColor = '#ffffff';
        document.getElementById('socialsPageButton').style.backgroundColor = '#ffffff';

        if (buttonId !== 'homePageButton') {
            document.getElementById(buttonId).style.backgroundColor = '#bbbbbb';
        }
    }

    function openItemEditModal(item) {
        openModal('itemsEditModal');
        document.getElementById('item-edit-name').value = String(item.name);
        document.getElementById('item-edit-brand').value = String(item.brand);
        document.getElementById('item-edit-weather').value = String(item.weather);
    }

    // Function to open specified modal
    function openModal(modalName) {
        currentModal = modalName;
        document.getElementById("modalOverlay").style.display = "block";
        document.getElementById(currentModal).style.display = "block";
    }

    // Function to close currently opened modal
    function closeModal() {
        document.getElementById("modalOverlay").style.display = "none";
        document.getElementById(currentModal).style.display = "none";
        currentModal = "";
    }

    // Function to open specified confirmation box
    function openCBox(cBoxName) {
        currentCBox = cBoxName;
        document.getElementById("cBoxOverlay").style.display = "block";
        document.getElementById(currentCBox).style.display = "block";
    }

    // Function to close currently opened confirmation box
    function closeCBox() {
        document.getElementById("cBoxOverlay").style.display = "none";
        document.getElementById(currentCBox).style.display = "none";
        currentCBox = "";
    }

    // Initial section to display
    showPage("homePage");

    // This is the outfits section
    function removeFocus(button) {
        setTimeout(() => {
            button.blur(); // Blur the button to remove focus
        }, 10); // Adjust the time (in milliseconds) as needed
    }

    function toggleFollow(button) {
        if (button.textContent === 'Follow') {
            button.textContent = 'Following';
            button.style.backgroundColor = '#57a1ff';
        } else {
            button.textContent = 'Follow';
            button.style.backgroundColor = '#3897f0';
        }
    }

    function toggleLike(button) {
        button.classList.toggle('liked');
    }

    // *************************
    // Data Management functions
    // *************************

    /*
    * ADD DATA TO CORRESPONDING TABLE
    * Adds data in form of an array with arrays into a table element.
    */
        function addDataToTable(table, data, pageNumber) {
            console.log("--------------ADD DATA TO TABLE------------------");
            const columns = 3; // number of columns to fill

            let pageItems = data[pageNumber];
            console.log("Data: ");
            console.log(data);
            console.log("Page Items: ");
            console.log(pageItems);
            console.log("Page Number: ");
            console.log(pageNumber);

            pageItems.forEach((item, i) => {
                // Calculate row and column indices
                const rowIndex = Math.floor(i / columns);
                const colIndex = (i % columns) + 1;

                if (table.rows[rowIndex]) {
                    let cell = table.rows[rowIndex].cells[colIndex];

                    if (!cell) {
                        cell = table.rows[rowIndex].insertCell(colIndex);
                    }

                    // Check if item.name exists before creating the buttonDiv and attaching the click event
                    if (item.name) {
                        // Create a new div containing edit and delete buttons
                        const buttonDiv = document.createElement('div');
                        buttonDiv.className = 'edit-delete-item-btns';
                        buttonDiv.style.display = 'none';

                        // Create Edit and Delete Buttons
                        const editButton = document.createElement('button');
                        editButton.innerText = 'Edit';
                        editButton.onclick = function(e) {
                            e.stopPropagation();  // prevent triggering cell's onclick event
                            openItemEditModal(item);  // call your edit function
                            selectedItem = item;
                        };

                        const deleteButton = document.createElement('button');
                        deleteButton.innerText = 'Delete';
                        deleteButton.onclick = function(e) {
                            e.stopPropagation();
                            openCBox('deleteItemCBox');
                            selectedItem = item;
                        }

                        buttonDiv.appendChild(editButton);
                        buttonDiv.appendChild(deleteButton);

                        // Add item name and buttons div to cell
                        if (typeof item.name === 'symbol') {
                            cell.innerHTML = String(item.name);
                        } else {
                            cell.innerHTML = item.name;
                        }

                        cell.appendChild(buttonDiv);

                        // Attach click handler to the cell
                        cell.onclick = function() {
                            selectItem(this);
                        };
                    }
                }
            });
        }

        function refreshTableData(table, data) {

            // create a Map for quick lookup
            let dataMap = new Map(data.map(item => [item.name, item]));

            // Loop to iterate over table cells
            for (let i = 0, row; row = table.rows[i]; i++) {
                for(let j = 0, cell; cell = row.cells[j]; j++) {

                    // Get the object name displayed in the cell without the buttons
                    let cellText = cell.childNodes[0]?.nodeValue?.trim();

                    if(cellText && !dataMap.has(cellText)) {
                        // Object is no longer present in data array, clear cell content
                        cell.innerHTML = "";
                    }
                }
            }
        }

    //-------------------------------------------
    //Items functions

    function createItem(category) {
        var itemName = document.querySelector('#item-create-name');
        var itemBrand = document.querySelector('#item-create-brand');
        var itemWeather = document.querySelector('#item-create-weather');
        var itemCategory;

        switch(itemWeather.value) {
            case "Sunny": itemWeather = Weather.SUNNY; break;
            case "Rainy": itemWeather = Weather.RAINY; break;
            case "Windy": itemWeather = Weather.WINDY; break;
            case "Snowy": itemWeather = Weather.SNOWY; break;
        }

        switch(category) {
            case "hats": itemCategory = Category.HEADS; break;
            case "tops": itemCategory = Category.TOPS; break;
            case "bottoms": itemCategory = Category.BOTTOMS; break;
            case "shoes": itemCategory = Category.SHOES; break;
        }

        var newItem = new Item(itemName.value, itemBrand.value, itemWeather, itemCategory);

        switch(category) {
            case "hats":
                hatsList.push(newItem);
                pagedHats = chunkArray(hatsList, 9);
                addDataToTable(hatsTable, pagedHats, calculatePageNum(category) - 1);
                break;
            case "tops":
                topsList.push(newItem);
                pagedTops = chunkArray(topsList, 9);
                addDataToTable(topsTable, pagedTops, calculatePageNum(category) - 1);
                break;
            case "bottoms":
                bottomsList.push(newItem);
                pagedBottoms = chunkArray(bottomsList, 9);
                addDataToTable(bottomsTable, pagedBottoms, calculatePageNum(category) - 1);
                break;
            case "shoes":
                shoesList.push(newItem);
                pagedShoes = chunkArray(shoesList, 9);
                addDataToTable(shoesTable, pagedShoes, calculatePageNum(category) - 1);
                break;
        }

        pageNumber = calculatePageNum(category);
        console.log(pageNumber);

        closeModal();
    }

    function editItem(item) {
        var itemName = document.querySelector('#item-edit-name');
        var itemBrand = document.querySelector('#item-edit-brand');
        var itemWeather = document.querySelector('#item-edit-weather');

        switch(itemWeather.value) {
            case "Sunny": itemWeather = Weather.SUNNY; break;
            case "Rainy": itemWeather = Weather.RAINY; break;
            case "Windy": itemWeather = Weather.WINDY; break;
            case "Snowy": itemWeather = Weather.SNOWY; break;
        }

        let newItem = new Item(itemName.value, itemBrand.value, itemWeather.value, item.category);

        switch(item.category) {
            case Category.HEADS:
                var index = hatsList.indexOf(item);
                hatsList[index] = newItem;
                addDataToTable(hatsTable, hatsList, currentPage);
                break;
            case Category.TOPS:
                var index = topsList.indexOf(item);
                topsList[index] = newItem;
                addDataToTable(topsTable, topsList, currentPage);
                break;
            case Category.BOTTOMS:
                var index = bottomsList.indexOf(item);
                bottomsList[index] = newItem;
                addDataToTable(bottomsTable, bottomsList, currentPage);
                break;
            case Category.SHOES:
                var index = shoesList.indexOf(item);
                shoesList[index] = newItem;
                addDataToTable(shoesTable, shoesList, currentPage);
                break;
        }

        closeModal();
        closeCBox();
    }

    function deleteItem(item) {

        console.log(item.name);
        console.log(item.brand);
        console.log(item.category.toString());


        switch(item.category) {
            case Category.HEADS:
                var index = hatsList.indexOf(item);
                hatsList.splice(index, 1);
                pagedHats = chunkArray(hatsList, 9);
                refreshTableData(hatsTable, pagedHats);
                break;
            case Category.TOPS:
                var index = topsList.indexOf(item);
                topsList.splice(index, 1);
                pagedTops = chunkArray(topsList, 9);
                refreshTableData(topsTable, pagedTops);
                break;
            case Category.BOTTOMS:
                var index = bottomsList.indexOf(item);
                bottomsList.splice(index, 1);
                pagedBottoms = chunkArray(bottomsList, 9);
                refreshTableData(bottomsTable, pagedBottoms);
                break;
            case Category.SHOES:
                var index = shoesList.indexOf(item);
                shoesList.splice(index, 1);
                pagedShoes = chunkArray(shoesList, 9);
                refreshTableData(shoesTable, pagedShoes);
                break;
        }
        closeCBox();
    }

    //-------------------------------------------
    //Outfit functions

    // Delete Outfit
    function deleteOutfit() {
        alert('Performing action: Delete Outfit');
        closeCBox();
    }

    //-------------------------------------------
    //Social functions

    // Post Outfit
    function postOutfit() {
        alert('Performing action: Posting Outfit');
        closeModal();
    }
</script>
</body>
</html>